
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Carousel Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="https://getbootstrap.com/docs/4.1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="https://getbootstrap.com/docs/4.1/examples/carousel/carousel.css" rel="stylesheet">
</head>
<body style="padding-top: 0;">

    <!--Nav Bar Kinda Thing-->
    <header>
        <div class="collapse bg-dark" id="navbarHeader">
            <div class="container">
                <div class="row">
                    <div class="col-sm-8 col-md-7 py-4">
                        <!--NavBar Title-->
                        <h4 class="text-white">About The Project</h4>
                        <!--NavBar Text-->
                        <p class="text-muted">
                            This is a project. Please check out all of details and dont be afraid to contact the maker(s).
                        </p>
                    </div>
                    <!--Contact-->
                    <div class="col-sm-4 offset-md-1 py-4">
                        <!--Contact Header-->
                        <h4 class="text-white">Contact</h4>
                        <!--Contact Links-->
                        <ul class="list-unstyle" style="list-style-type: none;" id="contactList">
                            <li><a href="../../index.html" target="_blank" class="text-white">Home Page</a></li>
                            <!--Class Link-->
                            <li><a href="http://charlottemorrison.com/" target="_blank" class="text-white">Mrs. Morrisons Class Site</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="navbar navbar-dark bg-dark shadow-sm">
            <div class="container d-flex justify-content-between">
                <a class="navbar-brand d-flex align-items-center text-white">
                    <strong id="projectHeaderName">Pi Cluster</strong>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </div>
    </header>

    <main role="main">

        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators" id="carouselCountList">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
            </ol>
            <div class="carousel-inner" id="carouselSlides">
            </div>
            <!--Carrets-->
            <!--Back-->
            <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <!--Next-->
            <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <div class="container marketing">
            <!-- People -->
            <div class="row text-center" id="peopleCards"> </div>

            <!-- THE FEATURETTES -->
            <div id="featurettes"> </div>

            <hr class="featurette-divider">

            <!-- THE CUSTOM CODE -->
            <div id="customCodeZone"> </div>

            <hr class="featurette-divider">
        </div>

        <!-- FOOTER -->
        <footer class="container">
            <p class="float-right"><a href="#">Back to top</a></p>
            <p>&copy; 2017-2018 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
        </footer>
    </main>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="https://getbootstrap.com/docs/4.1/assets/js/vendor/popper.min.js"></script>
    <script src="https://getbootstrap.com/docs/4.1/dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="https://getbootstrap.com/docs/4.1/assets/js/vendor/holder.min.js"></script>
    <script>
        window.onload = function () { if (localStorage.getItem('allData') == null || localStorage.getItem('allData') == undefined) { window.open('../index.html'); } }
        var allData = JSON.parse(localStorage.getItem('allData'));

        //Mobile Detection
        !function (a) { var b = /iPhone/i, c = /iPod/i, d = /iPad/i, e = /(?=.*\bAndroid\b)(?=.*\bMobile\b)/i, f = /Android/i, g = /(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i, h = /(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i, i = /IEMobile/i, j = /(?=.*\bWindows\b)(?=.*\bARM\b)/i, k = /BlackBerry/i, l = /BB10/i, m = /Opera Mini/i, n = /(CriOS|Chrome)(?=.*\bMobile\b)/i, o = /(?=.*\bFirefox\b)(?=.*\bMobile\b)/i, p = new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)", "i"), q = function (a, b) { return a.test(b) }, r = function (a) { var r = a || navigator.userAgent, s = r.split("[FBAN"); return "undefined" != typeof s[1] && (r = s[0]), s = r.split("Twitter"), "undefined" != typeof s[1] && (r = s[0]), this.apple = { phone: q(b, r), ipod: q(c, r), tablet: !q(b, r) && q(d, r), device: q(b, r) || q(c, r) || q(d, r) }, this.amazon = { phone: q(g, r), tablet: !q(g, r) && q(h, r), device: q(g, r) || q(h, r) }, this.android = { phone: q(g, r) || q(e, r), tablet: !q(g, r) && !q(e, r) && (q(h, r) || q(f, r)), device: q(g, r) || q(h, r) || q(e, r) || q(f, r) }, this.windows = { phone: q(i, r), tablet: q(j, r), device: q(i, r) || q(j, r) }, this.other = { blackberry: q(k, r), blackberry10: q(l, r), opera: q(m, r), firefox: q(o, r), chrome: q(n, r), device: q(k, r) || q(l, r) || q(m, r) || q(o, r) || q(n, r) }, this.seven_inch = q(p, r), this.any = this.apple.device || this.android.device || this.windows.device || this.other.device || this.seven_inch, this.phone = this.apple.phone || this.android.phone || this.windows.phone, this.tablet = this.apple.tablet || this.android.tablet || this.windows.tablet, "undefined" == typeof window ? this : void 0 }, s = function () { var a = new r; return a.Class = r, a }; "undefined" != typeof module && module.exports && "undefined" == typeof window ? module.exports = r : "undefined" != typeof module && module.exports && "undefined" != typeof window ? module.exports = s() : "function" == typeof define && define.amd ? define("isMobile", [], a.isMobile = s()) : a.isMobile = s() }(this);

        var currentURL = window.location.href;
        var currentProjectIndex;

        window.onload = function init() {
            currentProjectIndex = findProjectIndexByID(currentURL.substring(currentURL.indexOf('project=') + 8, currentURL.indexOf('.#')));

            makeContactsPanel();
            document.getElementById('projectHeaderName').innerHTML = allData.Projects[currentProjectIndex].Name;

            makeCarousel();
            makePeopleCards();

            if (allData.Projects[currentProjectIndex].Features != null || allData.Projects[currentProjectIndex].Features != undefined) {
                makeFeaturettes();
            }

            makeCustomeCode();
        }
        //Makes the panel of contacts
        function makeContactsPanel() {
            var output = '\n' +
                '<!--Home Page Link -->\n' +
                '<li><a href="../index.html" target="_blank" class="text-white">Home Page</a></li>\n' +
                '<!--Class Link-->\n' +
                '<li><a href="http://charlottemorrison.com/" target="_blank" class="text-white">Mrs. Morrisons Class Site</a></li>\n';
            for (i in allData.Projects[currentProjectIndex].Makers) {
                currentMakerIndex = findPersonIndexByID(allData.Projects[currentProjectIndex].Makers[i].ID);
                
                for (i in allData.People[currentMakerIndex].Contact) {
                    var id = allData.People[currentMakerIndex].Contact[i].ID;
                    var name = allData.People[currentMakerIndex].Contact[i].Name;
                    var url = allData.People[currentMakerIndex].Contact[i].URL;

                    output += '<!--' + id + ' Link -->\n' +
                        '<li><a href="' + url + '" target="_blank" class="text-white">' + name + '</a></li>\n';
                }
            }
            document.getElementById('contactList').innerHTML = output;
        }

        //Makes carousel slides and navigation
        function makeCarousel() {
            var carousel = '';
            var carouselCount = '';
            for (i in allData.Projects[currentProjectIndex].Carousel) {
                carousel += makeCarouselSlideCode(allData.Projects[currentProjectIndex].Carousel[i], i);
                if (i == 0) {
                    carouselCount += '<li data-target="#myCarousel" data-slide-to="' + i + '" class="active"></li >';
                } else {
                    carouselCount += '<li data-target="#myCarousel" data-slide-to="' + i + '" ></li >';
                }
            }
            document.getElementById('carouselSlides').innerHTML = carousel;
            document.getElementById('carouselCountList').innerHTML = carouselCount;


            for (i in allData.Projects[currentProjectIndex].Carousel) {
                if (allData.Projects[currentProjectIndex].Carousel[i].Image == "random" || allData.Projects[currentProjectIndex].Carousel[i].Image == "") {
                    var color = makeColorCombo();
                    document.getElementById(allData.Projects[currentProjectIndex].Carousel[i].ID + 'Img').src = 'data:image/svg+xml;charset=UTF-8, <svg%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"%20viewox%3D"0%200%20348%20225"%20preserveAspectRatio%3D"none"><g%20id%3D"holder_164d1e06aef"> <rect%20width%3D"100%"%20height%3D"100%"%20fill%3D"%23' + color.bg + '"> <%2Frect><%2Fg> <%2Fsvg>';
                    document.getElementById('carousel' + allData.Projects[currentProjectIndex].Carousel[i].ID + 'text').style.color = color.fg;
                }
                if (allData.Projects[currentProjectIndex].Carousel[i].Align == 'l') {
                    document.getElementById('carousel' + allData.Projects[currentProjectIndex].Carousel[i].ID + 'text').classList.add("text-left");
                } else if (allData.Projects[currentProjectIndex].Carousel[i].Align == 'r') {
                    document.getElementById('carousel' + allData.Projects[currentProjectIndex].Carousel[i].ID + 'text').classList.add("text-right");
                }
            }
        }

        //Makes carousel slide code
        function makeCarouselSlideCode(x, a) {
            var id = x.ID;
            var title = x.Title;
            var text = x.Text;
            var img = x.Image;
            
            if (a == 0) {
                var output = ' \n' +
                    '<div class="carousel-item active">\n' +
                    '    <img class="pos-slide" id="' + id + 'Img" src="' + img + '">\n' +
                    '    <div class="container">\n' +
                    '        <div class="carousel-caption" id="carousel' + id + 'text">\n' +
                    '            <h1>' + title + '</h1>\n' +
                    '            <p>' + text + '</p>\n' +
                    '        </div>\n' +
                    '    </div>\n' +
                    '</div> \n';
            } else {
                var output = ' \n' +
                    '<div class="carousel-item">\n' +
                    '    <img class="pos-slide"  id="' + id + 'Img" src="' + img + '">\n' +
                    '    <div class="container">\n' +
                    '        <div class="carousel-caption" id="carousel' + id + 'text">\n' +
                    '            <h1>' + title + '</h1>\n' +
                    '            <p>' + text + '</p>\n' +
                    '        </div>\n' +
                    '    </div>\n' +
                    '</div> \n';
            }
            return output;
        }

        //makes all the code for the featurettes
        function makeFeaturettes() {
            var output = '';
            for (i in allData.Projects[currentProjectIndex].Features) {
                if ((i % 2) == 1) { var d = 'l' } else { var d = 'r' }
                output += makeFeaturetteCode(allData.Projects[currentProjectIndex].Features[i], d);
            }
            document.getElementById('featurettes').innerHTML = output;
            for (i in allData.Projects[currentProjectIndex].Features) {
                var idName = allData.Projects[currentProjectIndex].Features[i].ID + 'Img';

                if (allData.Projects[currentProjectIndex].Features[i].img == "" || allData.Projects[currentProjectIndex].Features[i].img == "random") {
                    var color = makeColorCombo();
                    document.getElementById(idName).src = 'data:image/svg+xml;charset=UTF-8, <svg%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"%20viewox%3D"0%200%20348%20225"%20preserveAspectRatio%3D"none"> <defs> <style%20type%3D"text%2Fcss"> %23holder_164d1e06aef%20text%20%7B%20 fill%3A%23' + color.fg + '%3B font-weight%3Abold%3B font-family%3AArial%2Open%20Sans%2C%20sans-serif%2C%20monospace%3B font-size%3A17pt%20%7D %20 <%2Fstyle> <%2Fdefs> <g%20id%3D"holder_164d1e06aef"> <rect%20width%3D"500px"%20height%3D"500px"%20fill%3D"%23' + color.bg + '"> <%2Frect> <g> <text%20text-anchor%3D"middle"%20x%3D"50%"%20y%3D"50%">' + allData.Projects[currentProjectIndex].Features[i].Title + '<%2Ftext> <%2Fg> <%2Fg> <%2Fsvg>';
                } else {
                    document.getElementById(idName).src = allData.Projects[currentProjectIndex].Features[i].img;
                }

                if (!isMobile.any) {
                    $('#' + idName).tilt({
                        scale: 1.1,
                        perspective: 750,
                        glare: true,
                        maxGlare: 1
                    });
                }
            }

        }

        //Makes code for featurettes
        function makeFeaturetteCode(x, d) {
            var id = x.ID;
            var title = x.Title;
            var subTitle = x.SubTitle;
            var description = x.Description;

            if (d == 'l') {
                output = ' \n' +
                    '<hr class="featurette-divider">\n' +
                    '<div class="row featurette" id="' + id + 'Card">\n' +
                    '  <div class="col-md-5">\n' +
                    '      <img id="' + id + 'Img" class="featurette-image img-fluid mx-auto" style="width: 500px; height: 500px;" src="test.png" alt="' + id + 'Image">\n' +
                    '  </div>\n' +
                    '  <div class="col-md-7">\n' +
                    '      <h2 class="featurette-heading">' + title + '<span class="text-muted">' + subTitle + '</span></h2>\n' +
                    '      <p class="lead">' + description + '</p>\n' +
                    '  </div>\n' +
                    '</div>\n';
            } else {
                output = ' \n' +
                    '<hr class="featurette-divider">\n' +
                    '<div class="row featurette" id="' + id + 'Card">\n' +
                    '  <div class="col-md-7">\n' +
                    '      <h2 class="featurette-heading">' + title + '<span class="text-muted">' + subTitle + '</span></h2>\n' +
                    '      <p class="lead">' + description + '</p>\n' +
                    '  </div>\n' +
                    '  <div class="col-md-5">\n' +
                    '      <img id="' + id + 'Img" class="featurette-image img-fluid mx-auto" style="width: 500px; height: 500px;" src="test.png" alt="' + id + 'Image">\n' +
                    '  </div>\n' +
                    '</div>\n';
            }

            return output;
        }

        //Makes Object with random .bg color and either black or white .fg color
        function makeColorCombo() {
            output = new Object();

            output.bg = Math.floor(Math.random() * 16777215).toString(16);
            output.fg = getContrastYIQ(output.bg);

            return output;
        }

        //Input hex, return either FFF or 000
        function getContrastYIQ(hexcolor) {
            var r = parseInt(hexcolor.substr(0, 2), 16);
            var g = parseInt(hexcolor.substr(2, 2), 16);
            var b = parseInt(hexcolor.substr(4, 2), 16);
            var yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;
            return (yiq >= 128) ? '000' : 'FFF';
        }

        //Runs through and makes cards for all the people involved
        function makePeopleCards() {
            var output = '';
            for (i in allData.Projects[currentProjectIndex].Makers) {
                output += makePeopleCardCode(allData.Projects[currentProjectIndex].Makers[i].ID);
            }
            document.getElementById('peopleCards').innerHTML = output;
            for (i in allData.Projects[currentProjectIndex].Makers) {
                var idName = allData.Projects[currentProjectIndex].Makers[i].ID + 'Img';
                
                var index = findPersonIndexByID(allData.Projects[currentProjectIndex].Makers[i].ID);

                var color = makeColorCombo();
                document.getElementById(idName).src = 'data:image/svg+xml;charset=UTF-8, <svg%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"%20viewox%3D"0%200%20348%20225"%20preserveAspectRatio%3D"none"> <defs> <style%20type%3D"text%2Fcss"> %23holder_164d1e06aef%20text%20%7B%20 fill%3A%23' + color.fg + '%3B font-weight%3Abold%3B font-family%3AArial%2Open%20Sans%2C%20sans-serif%2C%20monospace%3B font-size%3A17pt%20%7D %20 <%2Fstyle> <%2Fdefs> <g%20id%3D"holder_164d1e06aef"> <rect%20width%3D"500px"%20height%3D"500px"%20fill%3D"%23' + color.bg + '"> <%2Frect> <g> <text%20text-anchor%3D"middle"%20x%3D"50%"%20y%3D"65%">' + allData.People[index]["First Name"] + ',<%2Ftext> <text%20text-anchor%3D"middle"%20x%3D"50%"%20y%3D"45%">' + allData.People[index]["Last Name"] + '<%2Ftext> <%2Fg> <%2Fg> <%2Fsvg>';

                if (!isMobile.any) {
                    $('#' + idName).tilt({
                        scale: 1.1,
                        perspective: 750,
                        glare: true,
                        maxGlare: 1
                    });
                }
            }
        }

        //Makes the code for an inputed person
        function makePeopleCardCode(id) {
            var index = findPersonIndexByID(id);
            var name = allData.People[index]["Last Name"];
            if (allData.People[index]["First Name"] != null && allData.People[index]["First Name"] != "") { name += ', ' + allData.People[index]["First Name"]; }

            var position = allData.Projects[currentProjectIndex].Makers[index].Position;
            var description = allData.Projects[currentProjectIndex].Makers[index].Description;

            var output = ' \n' +
                '<div class="col-lg-6" id="' + id + 'Card">\n' +
                '   <img class="rounded-circle" id="' + id + 'Img" style="height: 200px; width: 200px;" src="data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="' + name + '" width="140" height="140">\n' +
                '   <h2>' + name + '</h2>\n' +
                '   <p><strong>' + position + ',</strong> ' + description + '</p>\n' +
                '   <p><a class="btn btn-secondary" href="person.html?maker=' + id + '.html!" target="_blank" role="button">View Person &raquo;</a></p>\n' +
                '</div>\n';

            return output;
        }

        //Renders Custom Code
        function makeCustomeCode() {
            document.getElementById('customCodeZone').innerHTML = allData.Projects[currentProjectIndex].Custom;
        }

        //Input = Person ID| Output = allData.People[] index
        function findPersonIndexByID(value) {
            for (i in allData.People) {
                if (allData.People[i]["ID"] == value) {
                    return i;
                }
            }
        }

        //Input = Person ID| Output = allData.Projects[].Makers[] index
        function findPersonProjectIndexByID(value) {
            for (i in allData.Projects[currentProjectIndex].Makers) {
                if (allData.Projects[currentProjectIndex].Makers == value) {
                    console.log(i);
                    return i;
                }
            }
        }


        //Input = Person ID| Output = allData.Projects[] index
        function findProjectIndexByID(value) {
            for (i in allData.Projects) {
                if (allData.Projects[i]["ID"] == value) {
                    return i;
                }
            }
        }


    </script>
    <script src="https://gijsroge.github.io/tilt.js/js/jquery.slim.min.js"></script>
    <script src="https://unpkg.com/tilt.js@1.1.21/dest/tilt.jquery.min.js"></script>
    <script src="https://gijsroge.github.io/tilt.js/dest/app.js"></script>

</body>
</html>
